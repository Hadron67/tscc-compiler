{"code":"import { console, YYTAB } from '../util/common';\r\nimport { Item, Action, ItemSet } from './item-set';\r\nimport { List } from '../util/list';\r\nimport { ParseTable } from './ptable';\r\nimport { Assoc } from './token-entry';\r\nimport { TokenSet } from './token-set';\r\nvar ConflictType;\r\n(function (ConflictType) {\r\n    ConflictType[ConflictType[\"RR\"] = 0] = \"RR\";\r\n    ConflictType[ConflictType[\"SR\"] = 1] = \"SR\";\r\n})(ConflictType || (ConflictType = {}));\r\n;\r\nvar Conflict = (function () {\r\n    function Conflict() {\r\n    }\r\n    Conflict.prototype.toString = function () {\r\n        var ret = 'state ' + this.set.stateIndex + ',' + Conflict.cNames[this.type] + ' conflict:\\n';\r\n        ret += YYTAB + 'token: \"' + this.token.sym + '\"\\n';\r\n        ret += YYTAB + 'used rule: ' + this.used.toString() + '\\n';\r\n        ret += YYTAB + 'discarded rule: ' + this.discarded.toString() + '\\n';\r\n        return ret;\r\n    };\r\n    Conflict.cNames = ['reduce/reduce', 'shift/reduce'];\r\n    return Conflict;\r\n}());\r\nexport { Conflict };\r\nexport function genInitialSet(g) {\r\n    var start = g.rules[0][0];\r\n    var iset = new ItemSet(g);\r\n    iset.index = 0;\r\n    var set1 = new TokenSet(g.tokenCount);\r\n    set1.add(1);\r\n    iset.add(start, 0, true, set1, false);\r\n    return iset;\r\n}\r\nexport function genItemSets(g) {\r\n    var htable = {};\r\n    var iterations = 0;\r\n    function addToTable(iset) {\r\n        var h = iset.kernelHash();\r\n        if (htable[h] === undefined) {\r\n            htable[h] = [];\r\n        }\r\n        htable[h].push(iset);\r\n    }\r\n    function forEachInBucket(set, cb) {\r\n        var b = htable[set.kernelHash()];\r\n        if (b !== undefined) {\r\n            for (var i = 0; i < b.length; i++) {\r\n                if (cb(b[i]))\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    var index = 1;\r\n    var todoList = new List();\r\n    var incList = new List();\r\n    var doneList = new List();\r\n    todoList.append(genInitialSet(g));\r\n    while (!todoList.isEmpty() || !incList.isEmpty()) {\r\n        var comeFrom = null;\r\n        if (!incList.isEmpty()) {\r\n            var set = comeFrom = incList.pull();\r\n            set.forEach(function (item) {\r\n                if (item.actionType === Action.NONE) {\r\n                    console.assert(item.canShift());\r\n                    var shift = item.getShift();\r\n                    var newSet = new ItemSet(g);\r\n                    newSet.index = index++;\r\n                    todoList.append(newSet);\r\n                    set.forEach(function (item1) {\r\n                        if (item1.canShift()) {\r\n                            var rItem = item1.getShift();\r\n                            if (rItem === shift) {\r\n                                item1.actionType = Action.SHIFT;\r\n                                item1.shift = newSet;\r\n                                newSet.add(item1.rule, item1.marker + 1, true, item1.lah, false);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            set.complete = true;\r\n            doneList.append(set);\r\n        }\r\n        while (!todoList.isEmpty()) {\r\n            var set = todoList.pull();\r\n            set.closure();\r\n            set.forEach(function (item) {\r\n                if (!item.canShift()) {\r\n                    item.actionType = Action.REDUCE;\r\n                }\r\n            });\r\n            var merged = null;\r\n            forEachInBucket(set, function (gSet) {\r\n                if (gSet.canMergeTo(set)) {\r\n                    if (gSet.mergeTo(set)) {\r\n                        if (gSet.complete) {\r\n                            merged = gSet;\r\n                        }\r\n                    }\r\n                    if (comeFrom !== null) {\r\n                        comeFrom.forEach(function (sItem) {\r\n                            if (sItem.actionType === Action.SHIFT && sItem.shift === set) {\r\n                                sItem.shift = gSet;\r\n                            }\r\n                        });\r\n                    }\r\n                    set = null;\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            if (merged !== null) {\r\n                doneList.remove(merged);\r\n                incList.append(merged);\r\n                merged.complete = false;\r\n            }\r\n            else if (set !== null) {\r\n                incList.append(set);\r\n                addToTable(set);\r\n            }\r\n        }\r\n        iterations++;\r\n    }\r\n    var i = 0;\r\n    doneList.forEach(function (set) {\r\n        set.stateIndex = i++;\r\n    });\r\n    return {\r\n        result: doneList,\r\n        iterations: iterations\r\n    };\r\n}\r\nexport function genParseTable(g, doneList) {\r\n    var conflicts = [];\r\n    function resolveSRConflict(set, shift, reduce) {\r\n        var token = g.tokens[shift.getShift()];\r\n        if (token.assoc !== Assoc.UNDEFINED) {\r\n            var ruleP = reduce.rule.pr;\r\n            if (ruleP !== -1) {\r\n                if (ruleP > token.pr) {\r\n                    return reduce;\r\n                }\r\n                else if (ruleP < token.pr) {\r\n                    return shift;\r\n                }\r\n                else {\r\n                    if (token.assoc === Assoc.LEFT) {\r\n                        return reduce;\r\n                    }\r\n                    else if (token.assoc === Assoc.RIGHT) {\r\n                        return shift;\r\n                    }\r\n                    else if (token.assoc === Assoc.NON) {\r\n                        return Item.NULL;\r\n                    }\r\n                    else {\r\n                        console.assert(false);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var cf = new Conflict();\r\n        cf.type = ConflictType.SR;\r\n        cf.set = set;\r\n        cf.token = token;\r\n        cf.used = shift;\r\n        cf.discarded = reduce;\r\n        conflicts.push(cf);\r\n        return shift;\r\n    }\r\n    function resolveRRConflict(set, r1, r2, token) {\r\n        token = g.tokens[token];\r\n        var used = r1.rule.index > r2.rule.index ? r2 : r1;\r\n        var discarded = r1.rule.index > r2.rule.index ? r1 : r2;\r\n        var cf = new Conflict();\r\n        cf.type = ConflictType.RR;\r\n        cf.set = set;\r\n        cf.token = token;\r\n        cf.used = used;\r\n        cf.discarded = discarded;\r\n        conflicts.push(cf);\r\n        return used;\r\n    }\r\n    var ptable = new ParseTable(g, doneList.size);\r\n    doneList.forEach(function (set) {\r\n        set.forEach(function (item) {\r\n            if (item.actionType === Action.SHIFT) {\r\n                var sItem = item.getShift();\r\n                if (g.isToken(sItem)) {\r\n                    var tindex = set.stateIndex * g.tokenCount + sItem;\r\n                    var cItem = ptable.shift[tindex];\r\n                    if (cItem !== null) {\r\n                        if (cItem.actionType === Action.REDUCE) {\r\n                            ptable.shift[tindex] = resolveSRConflict(set, item, cItem);\r\n                        }\r\n                        else {\r\n                            console.assert(cItem.shift === item.shift);\r\n                        }\r\n                    }\r\n                    else {\r\n                        ptable.shift[tindex] = item;\r\n                    }\r\n                }\r\n                else {\r\n                    var tindex = set.stateIndex * g.nts.length + sItem - g.tokenCount;\r\n                    ptable.gotot[tindex] = item;\r\n                }\r\n            }\r\n            else if (item.actionType === Action.REDUCE) {\r\n                for (var i = 0; i < g.tokenCount; i++) {\r\n                    if (item.lah.contains(i + 1)) {\r\n                        var index = set.stateIndex * g.tokenCount + i;\r\n                        var cItem = ptable.shift[index];\r\n                        if (cItem !== null) {\r\n                            if (cItem.actionType === Action.REDUCE) {\r\n                                ptable.shift[index] = resolveRRConflict(set, cItem, item, i);\r\n                            }\r\n                            else if (cItem.actionType === Action.SHIFT) {\r\n                                ptable.shift[index] = resolveSRConflict(set, cItem, item);\r\n                            }\r\n                        }\r\n                        else {\r\n                            ptable.shift[index] = item;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                console.assert(false);\r\n            }\r\n        });\r\n    });\r\n    return {\r\n        result: ptable,\r\n        conflicts: conflicts\r\n    };\r\n}\r\n//# sourceMappingURL=ptable-gen.js.map","map":{"version":3,"file":"ptable-gen.js","sourceRoot":"","sources":["../src/grammar/ptable-gen.ts"],"names":[],"mappings":"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"}}
