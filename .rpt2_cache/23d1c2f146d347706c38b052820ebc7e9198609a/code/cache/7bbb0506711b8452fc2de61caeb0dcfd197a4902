{"code":"import { Grammar, Rule } from '../grammar/grammar';\r\nimport { File } from './file';\r\nimport { TokenSet } from '../grammar/token-set';\r\nimport { Assoc } from '../grammar/token-entry';\r\nimport { CompilationError as E } from '../util/E';\r\nexport var RItemType;\r\n(function (RItemType) {\r\n    RItemType[RItemType[\"NAME\"] = 0] = \"NAME\";\r\n    RItemType[RItemType[\"STRING\"] = 1] = \"STRING\";\r\n    RItemType[RItemType[\"BRACKET\"] = 2] = \"BRACKET\";\r\n})(RItemType || (RItemType = {}));\r\n;\r\nvar GBuilder = (function () {\r\n    function GBuilder() {\r\n        this.f = new File();\r\n        this.g = new Grammar();\r\n        this.tokenCount = 0;\r\n        this.tokens = {};\r\n        this.rules = [];\r\n        this.ruleStack = [];\r\n        this.ntCount = 0;\r\n        this.nts = {};\r\n        this.genIndex = 0;\r\n        this.first = true;\r\n        this.pr = 1;\r\n        this.states = { DEFAULT: 0 };\r\n        this.stateCount = 1;\r\n        this.stateNum = 0;\r\n        this.selectedStates = [];\r\n        this.pseudoTokens = {};\r\n        this.f.grammar = this.g;\r\n        this.addToken('eof', '', 0);\r\n    }\r\n    GBuilder.prototype.top = function () {\r\n        return this.ruleStack[this.ruleStack.length - 1];\r\n    };\r\n    GBuilder.prototype.splitAction = function (line) {\r\n        var t = this.top();\r\n        var s = '@' + this.genIndex++;\r\n        this.prepareRule(s, line);\r\n        this.addAction(t.action);\r\n        this.commitRule();\r\n        t.action = null;\r\n        this.addRuleItem(s, false, line);\r\n    };\r\n    GBuilder.prototype.addToken = function (id, name, line) {\r\n        var tk = this.tokens[id];\r\n        if (tk) {\r\n            throw new E('token \"' + id + '\"' + ' was already defined at line ' + tk, line);\r\n        }\r\n        else {\r\n            tk = this.tokens[id] = {\r\n                index: this.tokenCount++,\r\n                name: name,\r\n                line: line,\r\n                pr: 0,\r\n                assoc: Assoc.UNDEFINED\r\n            };\r\n        }\r\n        return this;\r\n    };\r\n    GBuilder.prototype.defineTokenPrec = function (tid, assoc, pseudo, line) {\r\n        if (!pseudo) {\r\n            var t = this.tokens[tid];\r\n            if (!t) {\r\n                throw new E('use of undefined token \"' + tid + '\" in associativity defination', line);\r\n            }\r\n            t.assoc = assoc;\r\n            t.pr = this.pr;\r\n        }\r\n        else {\r\n            var t2 = this.pseudoTokens[tid] = this.pseudoTokens[tid] || {\r\n                assoc: assoc,\r\n                pr: this.pr,\r\n                line: line\r\n            };\r\n        }\r\n        return this;\r\n    };\r\n    GBuilder.prototype.setOpt = function (name, value) {\r\n        this.f.opt[name] = value;\r\n        return this;\r\n    };\r\n    GBuilder.prototype.incPr = function () {\r\n        this.pr++;\r\n        return this;\r\n    };\r\n    GBuilder.prototype.changeState = function (s) {\r\n        var sn = this.states[s];\r\n        if (!sn) {\r\n            sn = this.states[s] = this.stateCount++;\r\n        }\r\n        this.stateNum = sn;\r\n        return this;\r\n    };\r\n    GBuilder.prototype.prepareRule = function (lhs, line) {\r\n        if (this.first) {\r\n            this.first = false;\r\n            this.prepareRule('(accept)', line);\r\n            this.addRuleItem(lhs, false, line);\r\n            this.commitRule();\r\n        }\r\n        this.ruleStack.push({\r\n            lhs: lhs,\r\n            action: null,\r\n            rhs: [],\r\n            line: line,\r\n            pr: -1\r\n        });\r\n        if (this.nts[lhs] === undefined) {\r\n            this.nts[lhs] = this.ntCount++;\r\n        }\r\n        return this;\r\n    };\r\n    GBuilder.prototype.addRuleItem = function (id, isTerm, line) {\r\n        var t = this.top();\r\n        if (t.action !== null) {\r\n            this.splitAction(line);\r\n        }\r\n        t.rhs.push({ id: id, isTerm: isTerm, line: line });\r\n        return this;\r\n    };\r\n    GBuilder.prototype.addAction = function (b) {\r\n        var t = this.top();\r\n        if (t.action !== null) {\r\n            this.splitAction(t.line);\r\n        }\r\n        t.action = b;\r\n        return this;\r\n    };\r\n    GBuilder.prototype.defineRulePr = function (token, pseudo, line) {\r\n        if (!pseudo) {\r\n            var t = this.tokens[token];\r\n            if (!t) {\r\n                throw new E('use of undefined token \"' + token + '\" in rule priority defination', line);\r\n            }\r\n            if (t.assoc === Assoc.UNDEFINED) {\r\n                throw new E('precedence of token \"' + token + '\" has not been defined', line);\r\n            }\r\n            this.top().pr = t.pr;\r\n        }\r\n        else {\r\n            var pt = this.pseudoTokens[token];\r\n            if (!pt) {\r\n                throw new E('pseudo token \"' + token + '\" is not defined', line);\r\n            }\r\n            this.top().pr = pt.pr;\r\n        }\r\n        return this;\r\n    };\r\n    GBuilder.prototype.commitRule = function () {\r\n        var t = this.ruleStack.pop();\r\n        this.rules[t.lhs] || (this.rules[t.lhs] = []);\r\n        this.rules.push(t);\r\n        return this;\r\n    };\r\n    GBuilder.prototype.build = function () {\r\n        this.g.tokenCount = this.tokenCount;\r\n        this.g.tokens = new Array(this.tokenCount);\r\n        this.g.nts = new Array(this.ntCount);\r\n        for (var tk in this.tokens) {\r\n            var index = this.tokens[tk].index;\r\n            this.g.tokens[index] = {\r\n                sym: tk,\r\n                alias: this.tokens[tk].name,\r\n                line: this.tokens[tk].line,\r\n                pr: this.tokens[tk].pr,\r\n                assoc: this.tokens[tk].assoc,\r\n                used: false\r\n            };\r\n        }\r\n        for (var nt in this.nts) {\r\n            this.g.nts[this.nts[nt]] = {\r\n                sym: nt,\r\n                firstSet: new TokenSet(this.tokenCount),\r\n                used: false\r\n            };\r\n        }\r\n        this.g.tokens[0].used = true;\r\n        this.g.nts[0].used = true;\r\n        var r = new Array(this.ntCount);\r\n        var ruleCount = 0;\r\n        for (var i = 0; i < this.rules.length; i++) {\r\n            var ruleItems = [];\r\n            var rule = this.rules[i];\r\n            var ntsIndex = this.nts[rule.lhs];\r\n            r[ntsIndex] || (r[ntsIndex] = []);\r\n            var newRule = new Rule(this.g, ntsIndex, rule.action, ruleItems, ruleCount++, rule.line);\r\n            newRule.pr = rule.pr;\r\n            r[ntsIndex].push(newRule);\r\n            for (var j = 0; j < rule.rhs.length; j++) {\r\n                var it = rule.rhs[j];\r\n                var rulePr = -1;\r\n                if (it.isTerm) {\r\n                    var tkEntry = this.tokens[it.id];\r\n                    if (tkEntry === undefined) {\r\n                        throw new E('use of undefined token \"' + it.id + '\"', it.line);\r\n                    }\r\n                    var termIndex = tkEntry.index;\r\n                    ruleItems.push(tkEntry.index);\r\n                    this.g.tokens[termIndex].used = true;\r\n                    if (tkEntry.assoc !== Assoc.UNDEFINED) {\r\n                        rulePr = tkEntry.pr;\r\n                    }\r\n                }\r\n                else {\r\n                    var ntIndex = this.nts[it.id];\r\n                    if (ntIndex === undefined) {\r\n                        throw new E('use of undefined non terminal \"' + it.id + '\"', it.line);\r\n                    }\r\n                    ruleItems.push(ntIndex + this.tokenCount);\r\n                    this.g.nts[ntIndex].used = true;\r\n                }\r\n                if (newRule.pr === -1 && rulePr !== -1) {\r\n                    newRule.pr = rulePr;\r\n                }\r\n            }\r\n        }\r\n        this.g.rules = r;\r\n        return this.f;\r\n    };\r\n    return GBuilder;\r\n}());\r\nexport { GBuilder };\r\n//# sourceMappingURL=gbuilder.js.map","map":{"version":3,"file":"gbuilder.js","sourceRoot":"","sources":["../src/parser/gbuilder.ts"],"names":[],"mappings":"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"}}
